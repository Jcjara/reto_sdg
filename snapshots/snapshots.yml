version: 2

snapshots:
  - name: sat_customer_attributes
    description: "Snapshot of customer descriptive attributes (SCD2)."
    columns:
      - name: CUSTOMER_HK
        description: "Hash key for customer."
        tests: [not_null]

      - name: NAME
        description: "Customer name."

      - name: ADDRESS
        description: "Customer address."

      - name: NATION_KEY
        description: "Reference to nation."

      - name: PHONE
        description: "Customer phone."

      - name: ACCTBAL
        description: "Customer account balance."

      - name: MKTSEGMENT
        description: "Market segment."

      - name: COMMENT
        description: "Customer comment."

      # Snapshot meta-columns
      - name: DBT_SCD_ID
        description: "Unique identifier for SCD row."
        tests: [not_null, unique]

      - name: DBT_VALID_FROM
        description: "Start timestamp for validity."
        tests: [not_null]

      - name: DBT_VALID_TO
        description: "End timestamp for validity."

  - name: sat_link_ops_lineattr
    description: "Snapshot of line-level operational attributes (SCD2)."
    columns:
      - name: LINK_HK
        description: "Hash key for order-part-supplier link."
        tests: [not_null]

      - name: QUANTITY
        description: "Line item quantity."

      - name: EXTENDED_PRICE
        description: "Extended price before discount/tax."

      - name: DISCOUNT
        description: "Discount applied to line."

      - name: TAX
        description: "Tax applied to line."

      - name: RETURNFLAG
        description: "Return flag."

      - name: LINESTATUS
        description: "Line status."

      - name: SHIP_DATE
        description: "Ship date."

      - name: COMMIT_DATE
        description: "Commit date."

      - name: RECEIPT_DATE
        description: "Receipt date."

      - name: SHIP_INSTRUCT
        description: "Shipping instructions."

      - name: SHIP_MODE
        description: "Shipping mode."

      - name: COMMENT
        description: "Line comment."

      # Snapshot meta-columns
      - name: DBT_SCD_ID
        description: "Unique identifier for SCD row."
        tests: [not_null, unique]

      - name: DBT_VALID_FROM
        description: "Start timestamp for validity."
        tests: [not_null]

      - name: DBT_VALID_TO
        description: "End timestamp for validity."
