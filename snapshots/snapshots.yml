version: 2

snapshots:
  - name: sat_customer_attributes
    description: "Satellite capturing descriptive attributes of customers."
    tests:
      - dbt_expectations.expect_column_values_to_not_be_null:
          arguments: { column_name: customer_hk }
      - dbt_expectations.expect_compound_columns_to_be_unique:
          arguments: { column_list: [customer_hk, dbt_valid_from] }

  - name: sat_order_attributes
    description: "Satellite capturing descriptive attributes of orders."
    tests:
      - dbt_expectations.expect_column_values_to_not_be_null:
          arguments: { column_name: order_hk }
      - dbt_expectations.expect_compound_columns_to_be_unique:
          arguments: { column_list: [order_hk, dbt_valid_from] }

  - name: sat_part_attributes
    description: "Satellite capturing descriptive attributes of parts."
    tests:
      - dbt_expectations.expect_column_values_to_not_be_null:
          arguments: { column_name: part_hk }
      - dbt_expectations.expect_compound_columns_to_be_unique:
          arguments: { column_list: [part_hk, dbt_valid_from] }

  - name: sat_supplier_attributes
    description: "Satellite capturing descriptive attributes of suppliers."
    tests:
      - dbt_expectations.expect_column_values_to_not_be_null:
          arguments: { column_name: supplier_hk }
      - dbt_expectations.expect_compound_columns_to_be_unique:
          arguments: { column_list: [supplier_hk, dbt_valid_from] }

  - name: sat_partsupp_attributes
    description: "Satellite capturing descriptive attributes of the PART–SUPPLIER relationship."
    tests:
      - dbt_expectations.expect_column_values_to_not_be_null:
          arguments: { column_name: link_hk }
      - dbt_expectations.expect_compound_columns_to_be_unique:
          arguments: { column_list: [link_hk, dbt_valid_from] }

  - name: sat_nation_attributes
    description: "Satellite capturing descriptive attributes of nations."
    tests:
      - dbt_expectations.expect_column_values_to_not_be_null:
          arguments: { column_name: nation_hk }
      - dbt_expectations.expect_compound_columns_to_be_unique:
          arguments: { column_list: [nation_hk, dbt_valid_from] }

  - name: sat_region_attributes
    description: "Satellite capturing descriptive attributes of regions."
    tests:
      - dbt_expectations.expect_column_values_to_not_be_null:
          arguments: { column_name: region_hk }
      - dbt_expectations.expect_compound_columns_to_be_unique:
          arguments: { column_list: [region_hk, dbt_valid_from] }

  - name: sat_link_order_part_supplier
    description: "Satellite capturing line-level attributes for the Order–Part–Supplier link (LINEITEM)."
    tests:
      - dbt_expectations.expect_column_values_to_not_be_null:
          arguments: { column_name: link_hk }
      - dbt_expectations.expect_compound_columns_to_be_unique:
          arguments: { column_list: [link_hk, dbt_valid_from] }
